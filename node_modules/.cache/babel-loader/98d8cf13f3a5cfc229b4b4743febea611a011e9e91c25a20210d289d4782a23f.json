{"ast":null,"code":"var _jsxFileName = \"/Users/satyamkumarjha/DEVREV/visualization/src/highcharts/base-chart.tsx\",\n  _s = $RefreshSig$();\nimport Highcharts from \"highcharts/highstock\";\nimport HighchartsReact from 'highcharts-react-official';\nimport _isEmpty from 'lodash/isEmpty';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { CHART_CONTAINER_PROPS, DUAL_AXIS_CHART_SPACING_TOP } from './constants';\nimport { getDefaultTheme, useDefaultTheme } from './hooks/use-default-theme';\nimport { LabelComponent } from './label-component';\nimport { TooltipComponent } from './tooltip-component';\nimport { analyzeChartType } from './utils/get-chart-type';\nimport { updateMargins } from './utils/update-margin';\nimport { LegendContainer } from './legend-container';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BaseChart = ({\n  options\n}) => {\n  _s();\n  var _options$xAxis, _options$xAxis$, _options$yAxis, _options$yAxis$, _options$tooltip, _options$legend, _chartRef$current2;\n  const {\n    chartRef\n  } = useDefaultTheme();\n  Highcharts.setOptions(getDefaultTheme());\n  const XAxisComponent = (_options$xAxis = options.xAxis) === null || _options$xAxis === void 0 ? void 0 : (_options$xAxis$ = _options$xAxis[0]) === null || _options$xAxis$ === void 0 ? void 0 : _options$xAxis$.CustomComponent;\n  const YAxisComponent = (_options$yAxis = options.yAxis) === null || _options$yAxis === void 0 ? void 0 : (_options$yAxis$ = _options$yAxis[0]) === null || _options$yAxis$ === void 0 ? void 0 : _options$yAxis$.CustomComponent;\n  const CustomTooltipComponent = (_options$tooltip = options.tooltip) === null || _options$tooltip === void 0 ? void 0 : _options$tooltip.CustomComponent;\n  const CustomLegendComponent = (_options$legend = options.legend) === null || _options$legend === void 0 ? void 0 : _options$legend.CustomComponent;\n  const [legendItems, setLegendItems] = useState([]);\n  const [xTicks, setXTicks] = useState([]);\n  const [yTicks, setYTicks] = useState([]);\n  const [_options, setOptions] = useState(options);\n  const {\n    isBarChart,\n    isCircularChart\n  } = analyzeChartType(options);\n  useEffect(() => {\n    const chart = chartRef.current && chartRef.current.chart;\n    if (chart) {\n      // deliberately added as method is there in the highcharts but not in types\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      //@ts-ignore\n      chart.getMargins();\n      chart.reflow();\n    }\n  }, [chartRef, xTicks, yTicks]);\n  const updateChartMargin = useCallback(() => {\n    var _chartRef$current;\n    updateMargins({\n      XAxisComponent,\n      YAxisComponent,\n      chart: (_chartRef$current = chartRef.current) === null || _chartRef$current === void 0 ? void 0 : _chartRef$current.chart,\n      isBarChart,\n      xTicks,\n      yTicks\n    });\n  }, [XAxisComponent, YAxisComponent, chartRef, isBarChart, xTicks, yTicks]);\n  useEffect(() => {\n    setOptions({\n      ...options,\n      chart: {\n        ...options.chart,\n        events: {\n          render() {\n            const _xticks = this.xAxis[0].ticks;\n            const xkeys = Object.keys(_xticks);\n            setXTicks(xkeys.map(key => _xticks[key]));\n            setLegendItems(this.legend.allItems);\n            const _yticks = this.yAxis[0].ticks;\n            const ykeys = Object.keys(_yticks);\n            setYTicks(ykeys.map(key => _yticks[key]));\n          }\n        },\n        marginTop: isCircularChart ? 0 : DUAL_AXIS_CHART_SPACING_TOP\n      }\n    });\n  }, [options]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col w-full h-full p-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 min-h-0\",\n      children: /*#__PURE__*/_jsxDEV(HighchartsReact, {\n        ref: chartRef,\n        containerProps: CHART_CONTAINER_PROPS,\n        highcharts: Highcharts,\n        options: _options\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), legendItems && /*#__PURE__*/_jsxDEV(LegendContainer, {\n      CustomLegendComponent: CustomLegendComponent,\n      legendItems: legendItems\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this), XAxisComponent && xTicks && xTicks.length > 0 && xTicks.map(tick => {\n      if (_isEmpty(tick)) return null;\n      return /*#__PURE__*/_jsxDEV(LabelComponent, {\n        tick: tick,\n        updateChartMargin: isBarChart ? undefined : updateChartMargin,\n        tickRenderer: XAxisComponent\n      }, tick.pos, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this);\n    }), YAxisComponent && yTicks && yTicks.length > 0 && yTicks.map(tick => {\n      if (_isEmpty(tick)) return null;\n      return /*#__PURE__*/_jsxDEV(LabelComponent, {\n        className: isBarChart ? '' : 'transform -translate-y-1/2',\n        tick: tick,\n        updateChartMargin: isBarChart ? updateChartMargin : undefined,\n        tickRenderer: YAxisComponent\n      }, tick.pos, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this);\n    }), CustomTooltipComponent && /*#__PURE__*/_jsxDEV(TooltipComponent, {\n      chart: (_chartRef$current2 = chartRef.current) === null || _chartRef$current2 === void 0 ? void 0 : _chartRef$current2.chart,\n      tooltipRenderer: CustomTooltipComponent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(BaseChart, \"/iTLcZRKbLP5Ogrtq0AKpi4/6yM=\", false, function () {\n  return [useDefaultTheme];\n});\n_c = BaseChart;\nvar _c;\n$RefreshReg$(_c, \"BaseChart\");","map":{"version":3,"names":["Highcharts","HighchartsReact","_isEmpty","React","useCallback","useEffect","useState","CHART_CONTAINER_PROPS","DUAL_AXIS_CHART_SPACING_TOP","getDefaultTheme","useDefaultTheme","LabelComponent","TooltipComponent","analyzeChartType","updateMargins","LegendContainer","jsxDEV","_jsxDEV","BaseChart","options","_s","_options$xAxis","_options$xAxis$","_options$yAxis","_options$yAxis$","_options$tooltip","_options$legend","_chartRef$current2","chartRef","setOptions","XAxisComponent","xAxis","CustomComponent","YAxisComponent","yAxis","CustomTooltipComponent","tooltip","CustomLegendComponent","legend","legendItems","setLegendItems","xTicks","setXTicks","yTicks","setYTicks","_options","isBarChart","isCircularChart","chart","current","getMargins","reflow","updateChartMargin","_chartRef$current","events","render","_xticks","ticks","xkeys","Object","keys","map","key","allItems","_yticks","ykeys","marginTop","className","children","ref","containerProps","highcharts","fileName","_jsxFileName","lineNumber","columnNumber","length","tick","undefined","tickRenderer","pos","tooltipRenderer","_c","$RefreshReg$"],"sources":["/Users/satyamkumarjha/DEVREV/visualization/src/highcharts/base-chart.tsx"],"sourcesContent":["import Highcharts, { Options, Point, Series, Tick } from \"highcharts/highstock\";\nimport HighchartsReact from 'highcharts-react-official';\nimport _isEmpty from 'lodash/isEmpty';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { CHART_CONTAINER_PROPS, DUAL_AXIS_CHART_SPACING_TOP } from './constants';\nimport { getDefaultTheme, useDefaultTheme } from './hooks/use-default-theme';\nimport { LabelComponent } from './label-component';\nimport { TooltipComponent } from './tooltip-component';\nimport { analyzeChartType } from './utils/get-chart-type';\nimport { updateMargins } from './utils/update-margin';\nimport { LegendContainer } from './legend-container';\n\n\n\nexport const BaseChart = ({ options }:{\n  options: any;\n}) => {\n  const { chartRef } = useDefaultTheme();\n\n  Highcharts.setOptions(getDefaultTheme());\n\n  const XAxisComponent = options.xAxis?.[0]?.CustomComponent;\n  const YAxisComponent = options.yAxis?.[0]?.CustomComponent;\n  const CustomTooltipComponent = options.tooltip?.CustomComponent;\n  const CustomLegendComponent = options.legend?.CustomComponent;\n  const [legendItems, setLegendItems] = useState<Array<Point | Series>>([]);\n\n\n  const [xTicks, setXTicks] = useState<Tick[]>([]);\n  const [yTicks, setYTicks] = useState<Tick[]>([]);\n\n  const [_options, setOptions] = useState<Options>(options);\n  const { isBarChart, isCircularChart } = analyzeChartType(options);\n\n\n  useEffect(() => {\n    const chart = chartRef.current && chartRef.current.chart;\n    if (chart) {\n      // deliberately added as method is there in the highcharts but not in types\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      //@ts-ignore\n      chart.getMargins();\n      chart.reflow();\n\n    }\n  }, [chartRef, xTicks, yTicks]);\n\n  const updateChartMargin = useCallback(() => {\n    updateMargins({\n      XAxisComponent,\n      YAxisComponent,\n      chart: chartRef.current?.chart,\n      isBarChart,\n      xTicks,\n      yTicks,\n    });\n  }, [XAxisComponent, YAxisComponent, chartRef, isBarChart, xTicks, yTicks]);\n\n  useEffect(() => {\n    setOptions({\n      ...options,\n      chart: {\n        ...options.chart,\n        events: {\n          render() {\n            const _xticks = this.xAxis[0].ticks;\n            const xkeys = Object.keys(_xticks);\n            setXTicks(xkeys.map((key) => _xticks[key]));\n            setLegendItems(this.legend.allItems as Array<Point | Series>);\n\n            const _yticks = this.yAxis[0].ticks;\n            const ykeys = Object.keys(_yticks);\n\n            setYTicks(ykeys.map((key) => _yticks[key]));\n          },\n        },\n        marginTop: isCircularChart ? 0 : DUAL_AXIS_CHART_SPACING_TOP,\n      },\n    } as Options);\n  }, [options]);\n\n  return (\n    <div className=\"flex flex-col w-full h-full p-10\" >\n      <div className=\"flex-1 min-h-0\">\n        <HighchartsReact\n          ref={chartRef}\n          containerProps={CHART_CONTAINER_PROPS}\n          highcharts={Highcharts}\n          options={_options}\n        />\n      </div>\n     \n      {legendItems && (\n        <LegendContainer CustomLegendComponent={CustomLegendComponent}  legendItems={legendItems} />\n      )}\n\n{       XAxisComponent &&\n        xTicks &&\n        xTicks.length > 0 &&\n        xTicks.map((tick) => {\n          if (_isEmpty(tick)) return null;\n          return (\n            <LabelComponent\n              key={tick.pos}\n              tick={tick}\n              updateChartMargin={isBarChart ? undefined : updateChartMargin}\n              tickRenderer={XAxisComponent}\n            />\n          );\n        })} \n{      YAxisComponent &&\n        yTicks &&\n        yTicks.length > 0 &&\n        yTicks.map((tick) => {\n          if (_isEmpty(tick)) return null;\n          return (\n            <LabelComponent\n              key={tick.pos}\n              className={isBarChart ? '' : 'transform -translate-y-1/2'}\n              tick={tick}\n              updateChartMargin={isBarChart ? updateChartMargin : undefined}\n              tickRenderer={YAxisComponent}\n            />\n          );\n        })}\n\n      {CustomTooltipComponent && (\n        <TooltipComponent chart={chartRef.current?.chart} tooltipRenderer={CustomTooltipComponent} />\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}